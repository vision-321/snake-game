# Snake Game 项目问题清单

## 已知问题

### 1. 移动端触控问题
- **issue-1**: 移动端触摸支持不完善
- **issue-3**: 触摸启动游戏存在问题
- **issue-5**: 触摸响应速度需要优化

### 2. 音频系统问题
- AudioContext 可能在某些浏览器中需要用户交互才能初始化
- 背景音乐循环可能存在内存泄漏风险（使用 setTimeout 而非 Web Audio API 调度）
- 音乐开关状态未持久化到 localStorage

### 3. 性能问题
- 每次渲染都重新创建颜色渐变计算，可以缓存优化
- 网格线在每帧都重绘，可以使用离屏 canvas 优化
- `generateFood()` 在蛇身很长时可能出现性能问题（while 循环）

### 4. 游戏逻辑问题
- 游戏暂停后恢复时，如果快速按键可能导致方向错误
- 分数计算没有考虑连续吃食物的 combo 机制
- 没有实现游戏存档/读档功能

### 5. 用户体验问题
- 游戏结束时没有显示游戏时长
- 没有排行榜功能
- 难度切换在游戏进行中会导致不一致体验
- 虚拟方向键在平板设备上可能太小

### 6. 代码质量问题
- 所有代码在单个 HTML 文件中，应该分离 CSS 和 JS
- 缺少 TypeScript 类型定义
- 没有单元测试
- 魔法数字较多，如 `MIN_SWIPE_DISTANCE = 20`

### 7. 兼容性问题
- `AudioContext` 兼容性：需要检测 `webkitAudioContext`
- Canvas 高 DPI 支持不完善（retina 屏幕模糊）
- 部分 CSS 属性可能需要前缀

## 待优化项

1. [ ] 添加 PWA 支持，离线可玩
2. [ ] 添加多人对战模式
3. [ ] 添加更多皮肤和主题
4. [ ] 优化移动端手势控制
5. [ ] 添加音效音量控制
6. [ ] 实现关卡系统

## 版本说明

- **V1 (index.html)**: 基础贪吃蛇
- **V2 (version2/)**: 角色版 + 灌篮高手主题曲
- **V3 (version3/)**: 追逐战模式 + 超级玛丽BGM + 角色选择
